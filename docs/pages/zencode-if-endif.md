
# Branching: If/Endif statements

Zenroom allows branching, done using the **If** and **Endif** Statements.

The *conditional branch* starts with a **If** statement and ends when the corresponding **EndIf** is found,
the **EndIf** close always only the latest opened **If**. For example

```gherking
If (condition1)
  When (do something)
  If (condition2)
    If (condition3)
      When (do something else)
      Then (print something)
    EndIf # ends conditional branching of condition 3
    Then (print something else)
  EndIf  # ends conditional branching of condition 2
Endif # ends conditional branching of condition 1
```

Inside a **If** you can use:
* **If** statements
* [**When**](zencode-cookbook-when) statements
* [**Then**](zencode-cookbook-then) statements
* [**Foreach**](zencode-foreach-endforeach) statementes (any of them must have a corresponding **EndForeach**
inside the conditional branch), pay attention that inside a **Foreach** you can not use the **Then** statements,
even if it is inside a **If** branching.

## Simple If/Endif example

We'll use a simple JSON file with two numbers as input:

[](../_media/examples/zencode_cookbook/branching/number_comparison.json ':include :type=code json')

And in this script we can see some simple comparisons between numbers:
* simple conditions, that will fail
* simple conditions, that will succeed
* two stacked conditions, where the second one will fail
* a simple condition, based on output from a the previous branch, that will succeed

The script goes:

[](../_media/examples/zencode_cookbook/branching/number_comparison.zen ':include :type=code gherkin')

You should expect an output like this:

[](../_media/examples/zencode_cookbook/branching/number_comparison_output.json ':include :type=code json')

## More complex If/Endif example

We can compare also elements different from numbers. For example in the following we will compare strings. We will use the following JSON as input:

[](../_media/examples/zencode_cookbook/branching/complex_comparison.json ':include :type=code json')

And in the following script we will:
* check if two strings are *equal* or *not equal*
* check if a string is *equal* or *not equal* to a dictionary element
* check if all the elements in a dictionary are equal
* check if at least two elements in a dictionary are different

[](../_media/examples/zencode_cookbook/branching/complex_comparison.zen ':include :type=code gherkin')

You should expect an output like this:

[](../_media/examples/zencode_cookbook/branching/complex_comparison_output.json ':include :type=code json')

## Statements that can be used as a condition

Only a subset of the **When** statements can be used to create a conditional branch, that are the one that,
after the `When I` part, start with the **verify** keyword. They can be both cryptographic statements
like a singature verification

```gherkin
When I verify '' has a eddsa signature in '' by ''
```

or, as seen above, more simpler check, like number comparison

```gherkin
When I verify number '' is less than ''
```

# The script used to create the material in this page

All the smart contracts and the data you see in this page are generated by the scripts [branching.bats](https://github.com/dyne/Zenroom/blob/master/test/zencode/branching.bats). If you want to run the scripts (on Linux) you should:
 - *git clone https://github.com/dyne/Zenroom.git*
 - install  **jq**
 - download a [zenroom binary](https://zenroom.org/#downloads) and place it */bin* or */usr/bin* or in *./Zenroom/src*
